(function() {a:for(var l=["MozAnimation","WebkitAnimation","msAnimation"],p=document.createElement("div").style,q=0;q<l.length;q++)if("undefined"!=typeof p[l[q]])break a;document.createElement("input").setAttribute("type","file");window.navigator.userAgent.match(/Macintosh/);a:for(var t=["MozTransition","WebkitTransition","msTransition"],u=document.createElement("div").style,v=0;v<t.length;v++)if("undefined"!=typeof u[t[v]])break a;$(w);function w(){$("form").each(function(){0===$(window).height()/2?window.setTimeout(function(){w()},100):$(this).css("margin-top",-$(this).outerHeight()/2)})};function y(h){this.i=(this.h="PUBLIC"!==h)?h:"*"}y.prototype.init=function(h){window.addEventListener("message",function(e){e=e.data;e.isCanvaApi&&(h[e.type]||$.noop)(e)},!1);z(this,{type:"Init",authenticated:this.h})};function z(h,e){e.isCanvaApi=!0;window.parent.postMessage(e,h.i)};function A(){var h={embedDomain:"PUBLIC"};function e(a){var c=$("#loginForm"),e=$("#signupForm"),f;0<c.length&&(f=c.get(0));0<e.length&&(f=e.get(0));$(a.target).is("#loginForm")||$(a.target).is("#signupForm")||jQuery.contains(f,a.target)||z(d,{type:"LoginSignup",action:"hide"});return!0}function m(a){a=a.emailAddress;k();a&&($("#loginUsername").val(a),$("#emailSignup #email").val(a));c()}function c(){window.setTimeout(function(){z(d,{type:"LoginSignup",action:"show"})},300)}function g(){var a=$("body").css("background-image").replace("url",
"").replace("(","").replace(")","").replace(/["']/g,"");z(d,{type:"LoginSignup",action:"pageTransition",k:a})}function k(){$("html").addClass("embedded");$(".embedded canvas").css("display","none");if(/login\?redirect/gi.test(window.location.href)){var a=window.location.href.replace("login?","signup?").replace("redirect","signupRedirect"),a=a+"%3Fonboarding%26layouts";$(function(){if(1===$("#signupLinkWrapper a").length)$("#signupLinkWrapper a").attr("href",a),$("#signupLinkWrapper a").on("mousedown",
g);else{var c=$('\x3ca href\x3d"'+a+'"\x3eSignup now\x3c/a\x3e');c.on("mousedown",g);$("#loginForm .message").html("Don\x26#8217;t have an account?").append(c)}})}else if(/signup\?signupRedirect/gi.test(window.location.href)){var c=window.location.href.replace("signup?","login?").replace("signupRedirect","redirect");$(function(){if(1===$("#loginLinkWrapper a").length)$("#loginLinkWrapper a").attr("href",c),$("#loginLinkWrapper a").on("mousedown",g);else{var a=$('\x3cp style\x3d"margin-top:2em;"\x3eAlready have an account?\x3c/p\x3e'),
d=$('\x3ca href\x3d"'+c+'"\x3eLogin\x3c/a\x3e');a.append(d);d.on("mousedown",g);$("#signupForm").append(a)}})}var d=document.createElement("style");d.setAttribute("type","text/css");var f=document.head||document.getElementsByTagName("head")[0];d.styleSheet?d.styleSheet.cssText="\n.embedded header { display: none !important; } .embedded footer { display: none !important; } .embedded body \x3e canvas { display: none !important; } ":d.appendChild(document.createTextNode("\n.embedded header { display: none !important; } .embedded footer { display: none !important; } .embedded body \x3e canvas { display: none !important; } "));
f.appendChild(d);$("header").hide();$("footer").hide()}if(window!=window.top){var d=new y(h.embedDomain);d.init({blur:function(){},focus:function(){},registerOrShowLogin:m});z(d,{type:"LoginSignup"});window.addEventListener("click",e)}}window!==window.top&&A();(function(){function h(){$("body").mousemove(function(a){n=a.clientX;r=a.clientY;x=Date.now();s||m()});$(window).on("blur mouseout",function(){r=n=null}).on("resize",function(){c&&c.parentNode&&c.parentNode.removeChild(c);e()});e()}function e(){var f=null==g?!0:!1;c=document.createElement("canvas");c.width=$(window).width();c.height=$(window).height();$("body").append(c);g=document.createElement("canvas");g.width=$(window).width();g.height=$(window).height();if(c.getContext&&c.getContext("2d")){k=
c.getContext("2d");d=g.getContext("2d");d.lineCap="round";d.shadowColor="#000000";d.shadowBlur=30;a=new Image;var b=$("body").css("background-image");b&&($(a).one("load",function(){f&&m()}),b=b.replace(/url\((.*)\)/,"$1").replace(/["']/gi,"").replace(/\.jpg/,"_color.jpg"),$(a).attr("src",b),b=$('\x3cdiv style\x3d"position:absolute;height:0;width:0;overflow:hidden;"\x3e\x3c/div\x3e'),$("body").append(b),b.append(a))}}function m(){var e=Date.now();s=e>x+500?!1:!0;n&&s&&f.splice(0,0,{time:e,x:n,y:r});
for(var b=0;b<f.length;)1E3<e-f[b].time?f.splice(b,f.length):b++;0<f.length&&window.j(m);d.clearRect(0,0,g.width,g.height);for(b=1;b<f.length;b++){var h=Math.sqrt(Math.pow(f[b].x-f[b-1].x,2)+Math.pow(f[b].y-f[b-1].y,2));d.strokeStyle="rgba(0,0,0,"+Math.max(1-(e-f[b].time)/1E3,0)+")";d.lineWidth=25+75*Math.max(1-h/50,0);d.beginPath();d.moveTo(f[b-1].x,f[b-1].y);d.lineTo(f[b].x,f[b].y);d.stroke()}e=c.width;b=c.width/a.naturalWidth*a.naturalHeight;b<c.height&&(b=c.height,e=c.height/a.naturalHeight*a.naturalWidth);
k.drawImage(a,0,0,e,b);k.globalCompositeOperation="destination-in";k.drawImage(g,0,0);k.globalCompositeOperation="source-over"}var c,g,k,d,a,n=null,r=null,f=[],x=0,s=!0;"createTouch"in document||$(h);window.j=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}()})();})();
